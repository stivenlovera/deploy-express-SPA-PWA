(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"V8/D":function(e,t,i){"use strict";i.r(t),i.d(t,"PendientePageModule",function(){return v});var n=i("ofXK"),c=i("3Pt+"),s=i("TEn/"),o=i("tyNb"),b=i("mrSG"),r=i("fXoL"),l=i("IDvd"),d=i("JwAU");function a(e,t){if(1&e){const e=r.Rb();r.Qb(0,"ion-row"),r.Qb(1,"ion-col"),r.Qb(2,"ion-card"),r.Qb(3,"ion-item"),r.Mb(4,"ion-icon",5),r.Qb(5,"ion-label"),r.vc(6,"Ticket "),r.Pb(),r.Qb(7,"ion-button",6),r.vc(8,"View"),r.Pb(),r.Pb(),r.Qb(9,"ion-card-header"),r.Qb(10,"ion-card-subtitle"),r.vc(11),r.Pb(),r.vc(12),r.Mb(13,"br"),r.vc(14),r.Mb(15,"br"),r.vc(16),r.Pb(),r.Qb(17,"ion-card-content"),r.Qb(18,"ion-button",7),r.Yb("click",function(){r.oc(e);const i=t.$implicit,n=t.index;return r.ac().sendTicket(i.id,n)}),r.vc(19,"Send"),r.Pb(),r.Qb(20,"ion-button",7),r.Yb("click",function(){r.oc(e);const i=t.$implicit,n=t.index;return r.ac().deleteTicket(i.id,n)}),r.vc(21,"Delete"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=t.$implicit;r.zb(11),r.wc(e.general_contractor),r.zb(1),r.xc(" ",e.proyect_nombre," "),r.zb(2),r.xc(" ",e.assignTicket," "),r.zb(2),r.xc(" ",e.proyect," ")}}const u=[{path:"",component:(()=>{class e{constructor(e,t,i){this.dbPwaService=e,this.serviceTicket=t,this.alertCtrl=i}ngOnInit(){this.dbPwaService.getAllTicketPendiente().subscribe(e=>{this.pendientes=e,console.log(e)})}sendTicket(e,t){this.dbPwaService.getOneTicketPendiente(e).subscribe(i=>Object(b.a)(this,void 0,void 0,function*(){const n=yield this.dbPwaService.getAllTicketPendienteMateriales(i.id).toPromise();i=Object.assign(i,{materiales:n});const c=yield this.dbPwaService.getAllTicketPendienteClassWorker(i.id).toPromise();i=Object.assign(i,{workers:c});const s=yield this.dbPwaService.getAllTicketPendienteImagesInicio(i.id).toPromise();i=Object.assign(i,{imagesInicio:s});const o=yield this.dbPwaService.getAllTicketPendienteImagesFinal(i.id).toPromise();i=Object.assign(i,{imagesFinal:o}),console.log(i),this.serviceTicket.postSaveTicket(i,i.idActividad).subscribe(i=>Object(b.a)(this,void 0,void 0,function*(){this.alert("Send"),this.dbPwaService.deleteTicketPendiente(e).subscribe(e=>{e&&this.pendientes.splice(t,1)},e=>{console.log(e)})}),e=>Object(b.a)(this,void 0,void 0,function*(){this.alert("There is no Internet conection")}))}))}deleteTicket(e,t){console.log(e),this.dbPwaService.deleteTicketPendiente(e).subscribe(e=>{e&&(this.pendientes.splice(t,1),this.alert("Duccessfully removed"))})}alert(e){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Alert",subHeader:e,message:"",buttons:["OK"]});yield t.present(),yield t.onDidDismiss()})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(l.a),r.Lb(d.a),r.Lb(s.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-pendiente"]],decls:11,vars:3,consts:[[3,"translucent"],["slot","start"],["slot","end"],[3,"fullscreen"],[4,"ngFor","ngForOf"],["name","pin","slot","start"],["fill","outline","slot","end"],["size","small","fill","outline",3,"click"]],template:function(e,t){1&e&&(r.Qb(0,"ion-header",0),r.Qb(1,"ion-toolbar"),r.Qb(2,"ion-buttons",1),r.Mb(3,"ion-menu-button"),r.Pb(),r.Qb(4,"ion-title"),r.vc(5,"Pendientes"),r.Pb(),r.Qb(6,"ion-buttons",2),r.Mb(7,"ion-back-button"),r.Pb(),r.Pb(),r.Pb(),r.Qb(8,"ion-content",3),r.Qb(9,"ion-grid"),r.tc(10,a,22,4,"ion-row",4),r.Pb(),r.Pb()),2&e&&(r.gc("translucent",!0),r.zb(8),r.gc("fullscreen",!0),r.zb(2),r.gc("ngForOf",t.pendientes))},directives:[s.o,s.K,s.f,s.x,s.J,s.c,s.d,s.l,s.n,n.j,s.B,s.k,s.g,s.s,s.p,s.t,s.e,s.i,s.j,s.h],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({imports:[[o.j.forChild(u)],o.j]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({imports:[[n.c,c.h,s.L,P]]}),e})()}}]);