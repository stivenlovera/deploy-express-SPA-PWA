(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"V8/D":function(e,i,t){"use strict";t.r(i),t.d(i,"PendientePageModule",function(){return v});var n=t("ofXK"),s=t("3Pt+"),c=t("TEn/"),o=t("tyNb"),r=t("mrSG"),b=t("fXoL"),l=t("IDvd"),d=t("JwAU");function a(e,i){if(1&e){const e=b.Rb();b.Qb(0,"ion-row"),b.Qb(1,"ion-col"),b.Qb(2,"ion-card"),b.Qb(3,"ion-item"),b.Mb(4,"ion-icon",5),b.Qb(5,"ion-label"),b.vc(6,"Ticket "),b.Pb(),b.Qb(7,"ion-button",6),b.vc(8,"View"),b.Pb(),b.Pb(),b.Qb(9,"ion-card-header"),b.Qb(10,"ion-card-subtitle"),b.vc(11),b.Pb(),b.vc(12),b.Mb(13,"br"),b.vc(14),b.Mb(15,"br"),b.vc(16),b.Pb(),b.Qb(17,"ion-card-content"),b.Qb(18,"ion-button",7),b.Yb("click",function(){b.oc(e);const t=i.$implicit,n=i.index;return b.ac().sendTicket(t.id,n)}),b.vc(19,"Send"),b.Pb(),b.Qb(20,"ion-button",7),b.Yb("click",function(){b.oc(e);const t=i.$implicit,n=i.index;return b.ac().deleteTicket(t.id,n)}),b.vc(21,"Delete"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&e){const e=i.$implicit;b.zb(11),b.wc(e.general_contractor),b.zb(1),b.xc(" ",e.proyect_nombre," "),b.zb(2),b.xc(" ",e.assignTicket," "),b.zb(2),b.xc(" ",e.proyect," ")}}const u=[{path:"",component:(()=>{class e{constructor(e,i,t,n){this.dbPwaService=e,this.serviceTicket=i,this.alertCtrl=t,this.loadingCtrl=n}ngOnInit(){this.dbPwaService.getAllTicketPendiente().subscribe(e=>{this.pendientes=e,console.log(e)})}sendTicket(e,i){return Object(r.a)(this,void 0,void 0,function*(){const t=yield this.loadingCtrl.create({cssClass:"my-custom-class",message:"Loading"});yield t.present(),this.dbPwaService.getOneTicketPendiente(e).subscribe(n=>Object(r.a)(this,void 0,void 0,function*(){const s=yield this.dbPwaService.getAllTicketPendienteMateriales(n.id).toPromise();n=Object.assign(n,{materiales:s});const c=yield this.dbPwaService.getAllTicketPendienteClassWorker(n.id).toPromise();n=Object.assign(n,{workers:c});const o=yield this.dbPwaService.getAllTicketPendienteImagesInicio(n.id).toPromise();n=Object.assign(n,{imagesInicio:o});const b=yield this.dbPwaService.getAllTicketPendienteImagesFinal(n.id).toPromise();n=Object.assign(n,{imagesFinal:b}),console.log(n),this.serviceTicket.postSaveTicket(n,n.idActividad).subscribe(n=>Object(r.a)(this,void 0,void 0,function*(){yield t.dismiss(),this.alert("Send"),this.dbPwaService.deleteTicketPendiente(e).subscribe(e=>{e&&this.pendientes.splice(i,1)},e=>{console.log(e)})}),e=>Object(r.a)(this,void 0,void 0,function*(){yield t.dismiss(),this.alert("There is no Internet conection")}))}))})}deleteTicket(e,i){console.log(e),this.dbPwaService.deleteTicketPendiente(e).subscribe(e=>{e&&(this.pendientes.splice(i,1),this.alert("Duccessfully removed"))})}alert(e){return Object(r.a)(this,void 0,void 0,function*(){const i=yield this.alertCtrl.create({cssClass:"my-custom-class",header:"Alert",subHeader:e,message:"",buttons:["OK"]});yield i.present(),yield i.onDidDismiss()})}}return e.\u0275fac=function(i){return new(i||e)(b.Lb(l.a),b.Lb(d.a),b.Lb(c.a),b.Lb(c.O))},e.\u0275cmp=b.Fb({type:e,selectors:[["app-pendiente"]],decls:11,vars:3,consts:[[3,"translucent"],["slot","start"],["slot","end"],[3,"fullscreen"],[4,"ngFor","ngForOf"],["name","pin","slot","start"],["fill","outline","slot","end"],["size","small","fill","outline",3,"click"]],template:function(e,i){1&e&&(b.Qb(0,"ion-header",0),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-buttons",1),b.Mb(3,"ion-menu-button"),b.Pb(),b.Qb(4,"ion-title"),b.vc(5,"Pendientes"),b.Pb(),b.Qb(6,"ion-buttons",2),b.Mb(7,"ion-back-button"),b.Pb(),b.Pb(),b.Pb(),b.Qb(8,"ion-content",3),b.Qb(9,"ion-grid"),b.tc(10,a,22,4,"ion-row",4),b.Pb(),b.Pb()),2&e&&(b.gc("translucent",!0),b.zb(8),b.gc("fullscreen",!0),b.zb(2),b.gc("ngForOf",i.pendientes))},directives:[c.p,c.L,c.f,c.y,c.K,c.c,c.d,c.m,c.o,n.j,c.C,c.l,c.g,c.t,c.q,c.u,c.e,c.i,c.j,c.h],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=b.Jb({type:e}),e.\u0275inj=b.Ib({imports:[[o.j.forChild(u)],o.j]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=b.Jb({type:e}),e.\u0275inj=b.Ib({imports:[[n.c,s.h,c.M,P]]}),e})()}}]);